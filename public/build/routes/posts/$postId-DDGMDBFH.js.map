{
  "version": 3,
  "sources": ["browser-route-module:C:\\Users\\Eduardo\\Desktop\\cursos\\remix-blog\\app\\routes\\posts\\$postId.jsx?browser", "../../../../app/routes/posts/$postId.jsx"],
  "sourcesContent": ["export { default } from \"C:\\\\Users\\\\Eduardo\\\\Desktop\\\\cursos\\\\remix-blog\\\\app\\\\routes\\\\posts\\\\$postId.jsx\";", "import { Link, redirect, useLoaderData } from 'remix'\nimport { db } from '~/utils/db.server'\nimport { getUser } from '~/utils/session.server'\n\nexport const loader = async ({ request, params }) => {\n  const user = await getUser(request)\n\n  const post = await db.post.findUnique({\n    where: { id: params.postId },\n  })\n\n  if (!post) throw new Error('Post not found')\n\n  const data = { post, user }\n  return data\n}\n\nexport const action = async ({ request, params }) => {\n  const form = await request.formData()\n  if (form.get('_method') === 'delete') {\n    const user = await getUser(request)\n\n    const post = await db.post.findUnique({\n      where: { id: params.postId },\n    })\n\n    if (!post) throw new Error('Post not found')\n\n    if (user && post.userId === user.id) {\n      await db.post.delete({ where: { id: params.postId } })\n    }\n\n    return redirect('/posts')\n  }\n}\n\nfunction Post() {\n  const { post, user } = useLoaderData()\n\n  return (\n    <div>\n      <div className='page-header'>\n        <h1>{post.title}</h1>\n        <Link to='/posts' className='btn btn-reverse'>\n          Back\n        </Link>\n      </div>\n\n      <div className='page-content'>{post.body}</div>\n\n      <div className='page-footer'>\n        {user.id === post.userId && (\n          <form method='POST'>\n            <input type='hidden' name='_method' value='delete' />\n            <button className='btn btn-delete'>Delete</button>\n          </form>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default Post\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAAA;;;ACAA;AACA,gBAAmB;AACnB,qBAAwB;AAkCxB,gBAAgB;AACd,QAAM,EAAE,MAAM,SAAS;AAEvB,SACE,oCAAC,OAAD,MACE,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACb,oCAAC,MAAD,MAAK,KAAK,QACV,oCAAC,MAAD;AAAA,IAAM,IAAG;AAAA,IAAS,WAAU;AAAA,KAAkB,UAKhD,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KAAgB,KAAK,OAEpC,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACZ,KAAK,OAAO,KAAK,UAChB,oCAAC,QAAD;AAAA,IAAM,QAAO;AAAA,KACX,oCAAC,SAAD;AAAA,IAAO,MAAK;AAAA,IAAS,MAAK;AAAA,IAAU,OAAM;AAAA,MAC1C,oCAAC,UAAD;AAAA,IAAQ,WAAU;AAAA,KAAiB;AAAA;AAQ/C,IAAO,iBAAQ;",
  "names": []
}
